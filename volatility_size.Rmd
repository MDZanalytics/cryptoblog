---
title: "Does bitcoin volatility decrease over time?"
author: "Mark Ziemann https://mdz-analytics.com"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    code_folding: hide
    fig_width: 7
    fig_height: 7
theme: cosmo
---

Source: https://github.com/markziemann/cryptoblog/blob/main/dmi_trading.Rmd

This report is distributed for FREE under the [MIT licence](https://github.com/markziemann/cryptoblog/blob/main/LICENSE),
but if you find it useful, consider a small tip.

BTC: 3PCBnq7TH37t6uQmVePjpHaHvzFFh72ZbM

LTC: MLzwpLhHE81xB459H15sDN7kBW16kLgHCF

## Intro

As a market grows, it is thought that volatility reduces. Lets see if this is the case with bitcoin.

Historical data from https://www.investing.com/indices/investing.com-btc-usd-historical-data

```{r,lib}

suppressPackageStartupMessages({
  library("jsonlite")
  library("tidyverse")
  library("runner")
  library("quantmod")
  library("TTR")
  library("vioplot")
  library("kableExtra")
  library(anytime)
})

```

Reminder: this is not financial advice.

## Get data

Here I will be analysing the weekly trading range as a proxy for volatility.
Data are from https://www.investing.com/indices/investing.com-btc-usd-historical-data

The data is in CSV format and the dates need to be cleaned a bit.

```{r,getdata}

daily <- read.csv("BitcoinHistoricalData.csv")
daily <- daily[nrow(daily):1,]
daily <- apply(daily,2,function(x) { gsub(",","",x) } )

weekly <- read.csv("BitcoinHistoricalData_weekly.csv")
weekly <- weekly[nrow(weekly):1,]
weekly <- apply(weekly,2,function(x) { gsub(",","",x) } )

weekly <- as.data.frame(weekly)

weekly$Price <- as.numeric(weekly$Price)
weekly$Open <- as.numeric(weekly$Open)
weekly$High <- as.numeric(weekly$High)
weekly$Low <- as.numeric(weekly$Low)

weekly$Date <- anydate(weekly$Date)

```

## Volatility on the weekly

Plotting the weekly trading range as a volatility metric.

```{r,weekly1}

weekly$vix <- ( weekly$High - weekly$Low ) / weekly$Open * 100

plot(weekly$Date,weekly$vix)

mylm <- lm(weekly$vix ~ weekly$Date)

abline(mylm,col="red",lwd=2)

```

Hmm, this looks okay but we expect volatility to taper off, not just linearly go to zero.

Now try log regression


```{r,logreg1}

model <- lm(weekly$vix ~ log(as.numeric(weekly$Date)))

plot(weekly$Date,weekly$vix,xlim=c(weekly$Date[1],weekly$Date[nrow(weekly)]+1000))

# generate points
x <- seq(from=as.numeric(weekly$Date)[1],
  to=as.numeric(weekly$Date)[nrow(weekly)]+1000,
  length.out=nrow(weekly) )

y <- predict(model,newdata=list(x=x), interval="confidence")

matlines(x,y, lwd=2)

summary(model)

```

With a trimmed y axis.

```{r,logreg2}

model <- lm(weekly$vix ~ log(as.numeric(weekly$Date)))

summary(model)

plot(weekly$Date,weekly$vix,
  xlim=c(weekly$Date[1],weekly$Date[nrow(weekly)]+1000),
  ylim=c(0,50)  )

# generate points
x <- seq(from=as.numeric(weekly$Date)[1],
  to=as.numeric(weekly$Date)[nrow(weekly)]+1000,
  length.out=nrow(weekly) )

y <- predict(model,newdata=list(x=x), interval="confidence")

matlines(x,y, lwd=2)

```

It is quite interesting that the logarithmic regression yielded a more or less linear curve,
indicating that volatility is decreasing in a constant fashion.

## Session information

For reproducibility

```{r,sessioninfo}

sessionInfo()

```
