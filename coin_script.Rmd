---
title: "Systematic backtesting of coin market indicators "
author: "Mark Ziemann https://mdz-analytics.com"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    code_folding: hide
theme: cosmo
---

Source: https://github.com/markziemann/cryptoblog/blob/main/coin_script.Rmd

This report is distributed for FREE under the [MIT licence](https://github.com/markziemann/cryptoblog/blob/main/LICENSE),
but if you find it useful, consider a small tip.

BTC: 3PCBnq7TH37t6uQmVePjpHaHvzFFh72ZbM

LTC: MLzwpLhHE81xB459H15sDN7kBW16kLgHCF

## Intro

There are many useful market indicators to time entry and exit.
This script automatically generated optimal indicators for any crypto coin.
The ticker code is coded below.

Today's date is shown below.

```{r,lib}

suppressPackageStartupMessages({
  library("jsonlite")
  library("tidyverse")
  library("runner")
  library("quantmod")
  library("TTR")
  library("vioplot")
  library("kableExtra")
})

Sys.Date()

TICKER="LTC"

```

Reminder: this is not financial advice.

## Get data

Obtaining historical data (daily) from CoinMarketCap.com

```{r,getdata}

mydate <- Sys.Date()-1


URL=paste("https://web-api.coinmarketcap.com/v1/cryptocurrency/ohlcv/historical?symbol=",
  TICKER,
  "&convert=USD&interval=daily&time_start=2013-06-01&time_end=",
  mydate, sep="")

download.file(URL,destfile="dat.txt")
dat <- fromJSON("dat.txt")
price <- dat$data$quotes
price <- data.frame(price$time_close,price$quote$USD$close,stringsAsFactors=FALSE)
colnames(price) <- c("date","close")
price$date <- sapply(strsplit(as.character(price$date),"T"),"[[",1)

```

## Generate scripts

Here I'm 

```{r,genscript}

script <- readLines("ma_trading_xx.Rmd")
script <- gsub("xx",TICKER,script)
scriptname <- gsub("xx",TICKER,"ma_trading_xx.Rmd")
writeLines(script,scriptname)
rmarkdown::render(scriptname)

